{"version":3,"sources":["../dist-esnext/index.js"],"names":["log","dir","env","process","NODE_ENV","app","Date","PORT","use","urlencoded","extended","json","routes","renderIndex","req","res","error","url","message","get","next","status","Error","createServer","server","listen","address"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;AAFA;;;AAGO,IAAMA,oBAAM,0BAAQ,EAAEC,KAAK,QAAP,EAAR,CAAZ;AACP,IAAMC,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,IAAwB,cAApC;AACA,IAAMC,MAAM,wBAAZ;AACAL,IAAI,wBAAJ,EAA8B,IAAIM,IAAJ,EAA9B;AACA,IAAMC,OAAOJ,QAAQD,GAAR,CAAYK,IAAZ,IAAoB,IAAjC;AACAF,IAAIG,GAAJ,CAAQ,qBAAR;AACAH,IAAIG,GAAJ,CAAQ,qBAAWC,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAL,IAAIG,GAAJ,CAAQ,qBAAWG,IAAX,EAAR;AACAN,IAAIG,GAAJ,CAAQ,sBAAO,KAAP,CAAR;AACAH,IAAIG,GAAJ,CAAQ,MAAR,EAAgB,uBAAiBI,MAAjC;AACA,IAAMC,cAAc,SAAdA,WAAc,CAACC,GAAD,EAAMC,GAAN,EAAc;AAC9BA,QAAIJ,IAAJ,CAAS;AACLK,eAAOF,IAAIG,GADN;AAELC,iBAAS;AAFJ,KAAT;AAIH,CALD;AAMAb,IAAIc,GAAJ,CAAQ,IAAR,EAAcN,WAAd;AACA,IAAIX,QAAQ,cAAZ,EAA4B;AACxBG,QAAIG,GAAJ,CAAQ,UAACQ,KAAD,EAAQF,GAAR,EAAaC,GAAb,EAAkBK,IAAlB,EAA2B;AAC/BL,YAAIM,MAAJ,CAAWL,MAAMK,MAAN,IAAgB,GAA3B;AACAN,YAAIJ,IAAJ,CAAS;AACLK,wBADK;AAELE,qBAASJ;AAFJ,SAAT;AAIAM,aAAKL,GAAL;AACH,KAPD;AAQH;AACDV,IAAIG,GAAJ,CAAQ,UAACM,GAAD,EAAMC,GAAN,EAAWK,IAAX,EAAoB;AACxB,QAAMJ,QAAQ,IAAIM,KAAJ,CAAU,cAAcR,GAAd,GAAoBC,GAA9B,CAAd;AACAK,SAAKJ,KAAL;AACH,CAHD;AAIAX,IAAIG,GAAJ,CAAQ,UAACQ,KAAD,EAAQD,GAAR,EAAgB;AACpBA,QAAIM,MAAJ,CAAWL,MAAMK,MAAN,IAAgB,GAA3B;AACAN,QAAIJ,IAAJ,CAAS;AACLK,eAAO,EADF;AAELE,iBAASF,MAAME;AAFV,KAAT;AAIH,CAND;AAOA,0CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAE4B,eAAKK,YAAL,CAAkBlB,GAAlB,CAF5B;;AAAA;AAEamB,0BAFb;;AAGOnB,wBAAIoB,MAAJ,CAAWlB,IAAX,4CAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACPiB,OAAOE,OAAP,EADO;;AAAA;AAEb1B,4CAAI,8CAA8CO,IAAlD;;AAFa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAjB;AAHP;AAAA;;AAAA;AAAA;AAAA;;AASOP;;AATP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD;AAYA","file":"index.js","sourcesContent":["import bodyParser from 'body-parser';\nimport cors from 'cors';\nimport express from 'express';\nimport http from 'http';\nimport morgan from 'morgan';\n// import path from 'path';\nimport BaseRoutes from './routes/Routes';\nimport logFile from 'ptz-log-file';\nexport const log = logFile({ dir: './logs' });\nconst env = process.env.NODE_ENV || 'developement';\nconst app = express();\nlog('Starting New server...', new Date());\nconst PORT = process.env.PORT || 3010;\napp.use(cors());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\napp.use(morgan('dev'));\napp.use('/api', new BaseRoutes().routes);\nconst renderIndex = (req, res) => {\n    res.json({\n        error: req.url,\n        message: '404'\n    });\n};\napp.get('/*', renderIndex);\nif (env === 'developement') {\n    app.use((error, req, res, next) => {\n        res.status(error.status || 500);\n        res.json({\n            error,\n            message: req\n        });\n        next(res);\n    });\n}\napp.use((req, res, next) => {\n    const error = new Error('Not Found' + req + res);\n    next(error);\n});\napp.use((error, res) => {\n    res.status(error.status || 500);\n    res.json({\n        error: {},\n        message: error.message\n    });\n});\n(async () => {\n    try {\n        const server = await http.createServer(app);\n        app.listen(PORT, async () => {\n            await server.address();\n            log('This express server is listening on port:' + PORT);\n        });\n    }\n    catch (e) {\n        log(e);\n    }\n})();\n//# sourceMappingURL=index.js.map"]}